model TariffOption {
    id String @id @default(uuid())

    name                      String
    published                 Boolean
    billingType               BillingType
    additionalAdultPrice      Float                          @db.DoublePrecision
    additionalChildrenPrice   Float                          @db.DoublePrecision
    availableHousingUnitTypes TariffOptionHousingUnitTypes[]
    ageGroupPrices            TariffOptionAgeGroup[]
    reservation               TariffOptionReservation[]

    /// [WeekDays]
    availableWeekend Json

    /// [IncludedItems]
    includedItems Json

    companyId String
    company   Company @relation(fields: [companyId], references: [id], onDelete: Cascade)

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("tariff_options")
}

model TariffOptionAgeGroup {
    id String @id @default(uuid())

    ageGroupId     String
    ageGroup       AgeGroup     @relation(fields: [ageGroupId], references: [id], onDelete: Cascade)
    tariffOptionId String
    tariffOption   TariffOption @relation(fields: [tariffOptionId], references: [id], onDelete: Cascade)

    price Float @db.DoublePrecision

    @@unique([ageGroupId, tariffOptionId], name: "tariff_option_age_groups")
    @@map("tariff_option_age_groups")
}

model TariffOptionHousingUnitTypes {
    id String @id @default(uuid())

    housingUnitTypeId String
    housingUnitType   HousingUnitType @relation(fields: [housingUnitTypeId], references: [id], onDelete: Cascade)
    tariffOptionId    String
    tariffOption      TariffOption    @relation(fields: [tariffOptionId], references: [id], onDelete: Cascade)

    @@unique([housingUnitTypeId, tariffOptionId], name: "tariff_option_housingunittype_unique")
    @@map("tariff_option_housing_unit_types")
}

model TariffOptionReservation {
    id String @id @default(uuid())

    tariffOptionId String
    tariffOption   TariffOption @relation(fields: [tariffOptionId], references: [id], onDelete: Cascade)
    reservationId  String
    reservation    Reservation  @relation(fields: [reservationId], references: [id], onDelete: Cascade)

    @@unique([reservationId, tariffOptionId], name: "reservation_tariff_option_unique")
    @@map("reservation_tariff_option")
}
